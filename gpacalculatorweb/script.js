const syllabus =
{
    "CSE": {
        "1": ["Mathematics - I", "Physics", "Chemistry", "Basic Electrical & Electronics Engineering", "Engineering Thermodynamics", "Computer Programming", "Computer Programming Lab", "Engineering Graphics Lab", "Basic Electrical & Electronics Lab"],
        "2": ["Mathematics – II", "Material Science", "Environmental Science", "Basic Civil and Mechanical Engineering", "Engineering Mechanics", "Communicative English", "Physics Lab", "Chemistry Lab", "Workshop Lab"],
        "3": ["Mathematics – III", "Electronics Devices and Circuits", "Object Oriented Programming & Design", "Digital System Design", "Data Structures", "Computer Organization and Architecture", "EDC Lab", "Data Structures Lab", "Digital Systems Design Lab"],
        "4": ["Mathematics – IV", "Microprocessors and Microcontrollers", "Automata Languages and Computation", "Design and Analysis of Algorithms", "Object Oriented Programming", "Graphics and Image Processing", "Microprocessors and Microcontrollers Lab", "DAA Lab", "OOP Lab"],
        "5": ["Operating Systems", "Computer Networks", "Database Management Systems", "Language Translators", "Software Engineering", "OS Lab", "CN Lab", "DBMS Lab", "General Proficiency – I Lab"],
        "6": ["Enterprise Solutions", "Embedded Systems", "Web Technology", "Elective – I", "Elective – II", "Enterprise Solution Lab", "Embedded Systems Lab", "Web Technology Lab", "Industrial Training Lab", "General Proficiency – II Lab"],
        "7": ["Artificial Intelligence", "Computer Hardware and Networks Troubleshooting", "Platform Technology", "Elective – III", "AI Lab", "Troubleshooting Lab", "Platform Technology Lab", "Project Phase I Lab"],
        "8": ["Professional Ethics", "Engineering Economics and Management", "Information Security", "Elective – IV", "Elective – V", "Seminar", "Comprehensive Viva Lab", "Project Phase II Lab"] 
    },
    "MECH": {
        "1": ["Mathematics – I", "Physics", "Chemistry", "Engineering Thermodynamics", "Basic Electrical & Electronics Engineering", "Computer Programming", "Physics Lab", "Chemistry Lab", "Workshop Practice Lab"],
        "2": ["Mathematics – II", "Material Science", "Environmental Science", "Basic Civil and Mechanical Engineering", "Engineering Mechanics", "Communicative English", "Basic Electrical & Electronics Lab", "Computer Programming Lab", "Engineering Mechanics Lab"],
        "3": ["Mathematics – III", "Mechanics of Solids","Mechanics of Fluids","Applied Thermodynamics", "Manufacturing Processes", "Electrical and Electronics Engineering ",  "Material Testing and Metallurgy Lab", "Manufacturing Processes Lab – I", "Electrical  and Electronics  Lab"],
        "4": ["Mathematics – IV", "Engineering Metallurgy", "Fluid Machinery ", "Kinematics of Machinery", "Machine Drawing", "Machining Processes ", "Fluid Mechanics and Machinery Lab", "Manufacturing Processes Lab – II", "Computer Aided Machine Drawing Lab"],
        "5": ["Dynamics of Machinery ", "Design of Machine Elements", "Metrology and Quality Control", "Heat and Mass Transfer", "Mechanical Measurements","Elective - I", " Manufacturing Process Lab - III ", "Mechanical Measurement and Metrology Lab", "Computational methods Lab","General Proficiency - I Lab"],
        "6": ["Power Plant Engineering", "Mechatronics", "Refrigeration and Air Conditioning", "Industrial Engineering", "Elective – I", "Mechatronics Lab", "Refrigeration and Air Conditioning Lab", "Industrial Training Lab", "General Proficiency – II Lab"],
        "7": ["Robotics", "Vibration and Noise Control", "Elective – II", "Elective – III", "Automobile Engineering Lab", "Robotics Lab", "Power Plant Engineering Lab", "Project Phase I Lab"],
        "8": ["Power Plant Engineering", "Professional Ethics and Indian Constitution", "Elective – IV", "Elective – V", "Seminar", "Project Phase II Lab"]
    },
    "ECE": {
        "1": ["Mathematics – I", "Physics", "Chemistry", "Basic Electrical & Electronics Engineering", "Computer Programming", "Engineering Thermodynamics", "Physics Lab", "Chemistry Lab", "Workshop Practice"],
        "2": ["Mathematics – II", "Material Science", "Environmental Science", "Basic Civil and Mechanical Engineering", "Engineering Mechanics", "Communicative English", "Computer Programming Lab", "Basic Electrical & Electronics Lab"],
        "3": ["Mathematics – III", "Electrical Engineering", "Data Structures and Object-Oriented Programming", "Electronic Devices and Circuits", "Signal Processing", "Analog Circuits", "Electrical Engineering Lab", "Data Structures Lab", "Electronic Devices and Circuits Lab"],
        "4": ["Mathematics – IV", "Digital Circuits", "Analog Communication", "Microprocessors and Microcontrollers", "Control Systems", "Communication Theory", "Electronic Circuits Design Lab", "Digital Circuits Lab", "Communication Lab-I"],
        "5": ["Digital Communication", "Embedded Systems", "VLSI Design", "Electromagnetic Theory", "System Design using Integrated Circuits", "Microprocessor and Microcontroller Lab", "System Design using Integrated Circuits Lab", "Networks and Transmission Lines Lab", "General Proficiency – I Lab"],
        "6": ["Wireless Communication", "Optical Fiber Communication", "Computer Networks", "Digital Signal Processing", "Elective – I", "Communication Lab – II", "Computer Networks Lab", "Digital Signal Processing Lab", "General Proficiency – II Lab"],
        "7": ["Satellite Communication", "Advanced VLSI Design", "Elective – II", "Elective – III", "Communication Lab – III", "Embedded Systems Lab", "Project Phase I Lab"],
        "8": ["Professional Ethics", "Engineering Economics and Management", "Elective – IV", "Elective – V", "Seminar", "Advanced Communication Lab", "Comprehensive Viva Lab", "Project Phase II Lab"]
    },
    "EEE": {
        "1": ["Mathematics – I", "Physics", "Chemistry", "Basic Electrical & Electronics Engineering", "Computer Programming", "Physics Lab", "Chemistry Lab", "Workshop Practice"],
        "2": ["Mathematics – II", "Material Science", "Environmental Science", "Basic Civil and Mechanical Engineering", "Engineering Mechanics", "Computer Programming Lab", "Basic Electrical & Electronics Lab"],
        "3": ["Electrical Machines – I", "Electronics – I", "Fluid and Thermal Machines", "Mathematics – III", "Electrical Machines Lab – I", "Electronics Lab – I", "Fluid and Thermal Machines Lab"],
        "4": ["Electrical Machines – II", "Electronics – II", "Control Systems", "Mathematics – IV", "Electrical Machines Lab – II", "Electronics Lab – II", "Data Structures and Object-Oriented Programming Lab"],
        "5": ["Power Systems", "Power Electronics", "Electromagnetic Fields", "Digital Signal Processing", "Electronics Lab – III", "Measurements and Control Lab", "General Proficiency – I Lab"],
        "6": ["High Voltage Engineering", "Switchgear and Protection", "Electric Drives", "Elective – I", "Elective – II", "Power Electronics Lab", "Microprocessor and Microcontroller Lab", "General Proficiency – II Lab"],
        "7": ["Renewable Energy Systems", "Smart Grid Technology", "Elective – III", "Elective – IV", "Power System Simulation Lab", "Project Phase I Lab"],
        "8": ["Professional Ethics", "Engineering Economics and Management", "Elective – V", "Seminar", "Comprehensive Viva Lab", "Project Phase II Lab"]
    },
    "BME": {
        "1": ["Mathematics – I", "Physics", "Chemistry", "Basic Electrical & Electronics Engineering", "Computer Programming", "Engineering Graphics", "Physics Lab", "Chemistry Lab", "Workshop Practice"],
        "2": ["Mathematics – II", "Environmental Science", "Human Anatomy and Physiology", "Material Science", "Basic Civil and Mechanical Engineering", "Communicative English", "Computer Programming Lab", "Basic Electrical & Electronics Lab"],
        "3": ["Mathematics – III", "Electronic Devices and Circuits", "Biochemistry", "Signals and Systems", "Data Structures and Object-Oriented Programming", "Biomedical Instrumentation – I", "Electronic Devices and Circuits Lab", "Biochemistry and Human Physiology Lab", "Data Structures and Object-Oriented Programming Lab"],
        "4": ["Mathematics – IV", "Digital Electronics", "Biomedical Instrumentation – II", "Biomedical Sensors and Transducers", "Microprocessors and Microcontrollers", "Biomedical Signal Processing", "Linear and Digital Integrated Circuits Lab", "Biomedical Sensors and Transducers Lab", "Simulation Lab"],
        "5": ["Medical Imaging Techniques", "Pathology and Microbiology", "Rehabilitation Engineering", "Biomaterials and Artificial Organs", "Elective – I", "Medical Instrumentation Lab", "Pathology and Microbiology Lab", "Microprocessor & Its Applications Lab", "General Proficiency – I Lab"],
        "6": ["Diagnostic and Therapeutic Equipment", "Clinical Engineering", "Medical Ethics and Regulations", "Elective – II", "Elective – III", "Diagnostic and Therapeutic Equipment Lab", "Biomedical Signal Processing Lab", "System Design Using Microcontrollers Lab", "General Proficiency – II Lab"],
        "7": ["Medical Robotics", "Biomechanics", "Elective – IV", "Elective – V", "Digital Image Processing Lab", "Project Phase I Lab"],
        "8": ["Professional Ethics", "Engineering Economics and Management", "Elective – VI", "Seminar", "Comprehensive Viva Lab", "Project Phase II Lab"]
    }
};
const gradePoints = { "S": 10, "A": 9, "B": 8, "C": 7, "D": 6, "E": 5, "F": 0 };
let semesterGPA = {};

function loadSemesters() {
    let department = document.getElementById("department").value;
    let semesterSelect = document.getElementById("semester");
    semesterSelect.innerHTML = "<option value=''>--Select--</option>";

    if (department && syllabus[department]) {
        for (let semester in syllabus[department]) {
            let option = document.createElement("option");
            option.value = semester;
            option.text = `Semester ${semester}`;
            semesterSelect.appendChild(option);
        }
    }
}

function loadSubjects() {
    let department = document.getElementById("department").value;
    let semester = document.getElementById("semester").value;
    let subjectsContainer = document.getElementById("subjects-container");

    subjectsContainer.innerHTML = "";

    if (!department || !syllabus[department] || !semester || !syllabus[department][semester]) {
        return;
    }

    let subjects = syllabus[department][semester];

    subjects.forEach(subject => {
        let subjectName = subject.trim().toLowerCase();
        let credits = subjectName.includes("lab") ? 2 : 4;

        let subjectDiv = document.createElement("div");
        subjectDiv.innerHTML = `
            <label>${subject} (${credits} Credits)</label>
            <select class="grades">
                ${Object.keys(gradePoints).map(grade => 
                    `<option value="${grade}">${grade} (${gradePoints[grade]})</option>`).join("")}
            </select>
            <input type="hidden" class="credits" value="${credits}">
        `;
        subjectsContainer.appendChild(subjectDiv);
    });
}

function calculateGPA() {
    let grades = document.querySelectorAll(".grades");
    let credits = document.querySelectorAll(".credits");

    let totalCredits = 0, weightedSum = 0;

    grades.forEach((grade, i) => {
        totalCredits += +credits[i].value;
        weightedSum += gradePoints[grade.value] * +credits[i].value;
    });

    if (totalCredits === 0) {
        document.getElementById("gpa-result").innerText = "GPA: N/A";
        return;
    }

    let gpa = (weightedSum / totalCredits).toFixed(2);
    document.getElementById("gpa-result").innerText = `GPA: ${gpa}`;

    let semester = document.getElementById("semester").value;
    semesterGPA[semester] = { gpa: parseFloat(gpa), credits: totalCredits };
}

function calculateCGPA() {
    let totalCredits = 0, weightedSum = 0;

    for (let sem in semesterGPA) {
        totalCredits += semesterGPA[sem].credits;
        weightedSum += semesterGPA[sem].gpa * semesterGPA[sem].credits;
    }

    if (totalCredits === 0) {
        document.getElementById("cgpa-result").innerText = "CGPA: N/A";
        return;
    }

    let cgpa = (weightedSum / totalCredits).toFixed(2);
    document.getElementById("cgpa-result").innerText = `CGPA: ${cgpa}`;
}